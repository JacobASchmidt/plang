module main

import (
    "db"
    "time"
    "id"
    "http"
    "strings"
    "format"
    "json"
)


type Tweet struct
    Message string 
    Time    time.Time
    UserID  id.ID


def (t Tweet) JSON(sb strings.Builder) strings.Builder
    return json.NewObject(sb)
            .AddString("message", t.Message)
            .AddString("time", time.DateTime(t.Time))
            .AddStringBuilder("userId", (sb) => t.User.FormatTo(sb))
            .Finish()
    
